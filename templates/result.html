<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Personalized Diet Plan</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

  <!-- ---------- NAVBAR ---------- -->
  <nav class="navbar">
  <a class="brand" href="/" style="
      font-size: 22px;
      font-weight: 800;
      color: #ffffff;
      margin-right: auto;
  ">NutriVision</a>

  <a class="nav-item" href="/">Home</a>
  <a class="nav-item" href="/about">About</a>
  <a class="nav-item" href="/explore">Food Explorer</a>
  <a class="nav-item" href="/tips">Tips</a>
  <a class="nav-item" href="/contact">Contact</a>
  <a class="nav-item" href="/login">Login</a>
</nav>


  <header>
    <h1>ğŸ Your Personalized Diet Plan</h1>
    <p>Based on AI + your health inputs</p>
  </header>

  <main>
    <div class="result-card">

      <!-- BMI SECTION -->
      <h2>Body Mass Index (BMI)</h2>
      <p class="highlight">{{ bmi }}</p>
      <h3>Status: <span>{{ bmi_status }}</span></h3>

      <!-- CALORIE SECTION -->
      <h2>Daily Calorie Requirement</h2>
      <p class="highlight">{{ calories }} kcal</p>

      <h3>Goal: <span>{{ goal }}</span></h3>
      <h3>Food Preference: <span>{{ preference }}</span></h3>

      <!-- MEALS SECTION -->
      <h2>Recommended Meals</h2>
      <div id="mealList" class="meal-list">
        {% for meal in meals %}
        <div class="meal-item">
          <span class="meal-emoji">ğŸ½ï¸</span>
          <div>
            <p class="dish-name">{{ meal['Dish Name'] }}</p>
            <p class="nutri-info">
              ğŸ {{ meal['Calories (kcal)'] }} kcal |
              ğŸ¥© {{ meal['Protein (g)'] }} g protein |
              ğŸš {{ meal['Carbohydrates (g)'] }} g carbs |
              ğŸ§ˆ {{ meal['Fats (g)'] }} g fat
            </p>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- SHOW MORE -->
      <button id="moreBtn" class="back-btn">ğŸ”„ Show More Options</button>

      <a href="/" class="back-btn">â† Go Back</a>
    </div>
  </main>

  <footer>
    <p>Made with â¤ï¸ by Atharva & Team | PCCOE AIML</p>
  </footer>


  <!-- ---------- JAVASCRIPT FOR SHOW MORE ---------- -->
  <script>
    const moreBtn = document.getElementById('moreBtn');

    moreBtn.addEventListener('click', async () => {
      const response = await fetch('/more_meals', {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: `goal={{ goal }}&preference={{ preference }}`
      });

      const meals = await response.json();

      const mealList = document.getElementById("mealList");
      mealList.innerHTML = meals.map(m => `
        <div class="meal-item">
          <span class="meal-emoji">ğŸ½ï¸</span>
          <div>
            <p class='dish-name'>${m["Dish Name"]}</p>
            <p class='nutri-info'>
              ğŸ ${m["Calories (kcal)"]} kcal |
              ğŸ¥© ${m["Protein (g)"]} g protein |
              ğŸš ${m["Carbohydrates (g)"]} g carbs |
              ğŸ§ˆ ${m["Fats (g)"]} g fat
            </p>
          </div>
        </div>
      `).join("");
    });
  </script>

</body>
</html>
